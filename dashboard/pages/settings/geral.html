<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geral - Configura√ß√µes - ImobFlash</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>üè† ImobFlash</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="../../dashboard.html" class="nav-item">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="../conversations.html" class="nav-item">
                    <span class="nav-icon">üí¨</span>
                    <span class="nav-text">Conversas</span>
                </a>
                <a href="../settings.html" class="nav-item active">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Configura√ß√µes</span>
                </a>
            </nav>
            
            <!-- Submenu de Configura√ß√µes -->
            <nav class="sidebar-subnav" id="settingsSubnav">
                <a href="geral.html" class="subnav-item active">
                    <span class="subnav-icon">‚öôÔ∏è</span>
                    <span class="subnav-text">Geral</span>
                </a>
                <a href="database.html" class="subnav-item">
                    <span class="subnav-icon">üóÑÔ∏è</span>
                    <span class="subnav-text">Base de Dados</span>
                </a>
                <a href="origens.html" class="subnav-item">
                    <span class="subnav-icon">üè†</span>
                    <span class="subnav-text">Origens</span>
                </a>
                <a href="agente-ia.html" class="subnav-item">
                    <span class="subnav-icon">ü§ñ</span>
                    <span class="subnav-text">Agente IA</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="dashboard-header">
                <h1>‚öôÔ∏è Configura√ß√µes Gerais</h1>
                <div class="header-actions">
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="connectionStatus">Conectado</span>
                    </div>
                    <button class="btn btn-logout" onclick="logout()">Sair</button>
                </div>
            </header>

            <!-- Settings Content -->
            <div class="dashboard-content">
                <div class="settings-container">
                    <h2 class="settings-title">‚öôÔ∏è Configura√ß√µes Gerais do Sistema</h2>
                    
                    <div class="settings-section">
                        <h3 class="settings-section-title">üîÑ Reload Autom√°tico</h3>
                        <p class="settings-description">Configure o reload autom√°tico da p√°gina para manter a extens√£o funcionando.</p>
                        
                        <div class="settings-card">
                            <div class="settings-card-header">
                                <h4>Configura√ß√µes de Reload</h4>
                                <p>Ative ou desative o reload autom√°tico e defina o intervalo.</p>
                            </div>
                            <div class="settings-card-body">
                                <div class="form-group">
                                    <input type="checkbox" id="autoReloadEnabled" class="form-checkbox">
                                    <label for="autoReloadEnabled" style="display: inline-block; margin-left: 8px;">Ativar Reload Autom√°tico</label>
                                </div>
                                
                                <div class="form-group">
                                    <label for="autoReloadMinMinutes">Intervalo M√≠nimo (minutos)</label>
                                    <input type="number" id="autoReloadMinMinutes" class="form-input" min="1" max="60" value="3">
                                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Tempo m√≠nimo antes do reload autom√°tico</p>
                                </div>
                                
                                <div class="form-group">
                                    <label for="autoReloadMaxMinutes">Intervalo M√°ximo (minutos)</label>
                                    <input type="number" id="autoReloadMaxMinutes" class="form-input" min="1" max="60" value="10">
                                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Tempo m√°ximo antes do reload autom√°tico</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-section-title">üîÑ Refresh Ap√≥s Processar Conversa</h3>
                        <p class="settings-description">Configure se a p√°gina deve ser recarregada ap√≥s processar uma conversa, antes de passar para a pr√≥xima.</p>
                        
                        <div class="settings-card">
                            <div class="settings-card-header">
                                <h4>Configura√ß√£o de Refresh</h4>
                                <p>Ative ou desative o refresh autom√°tico ap√≥s processar cada conversa.</p>
                            </div>
                            <div class="settings-card-body">
                                <div class="form-group">
                                    <input type="checkbox" id="refreshAfterConversation" class="form-checkbox">
                                    <label for="refreshAfterConversation" style="display: inline-block; margin-left: 8px;">Ativar Refresh Ap√≥s Processar Conversa</label>
                                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 4px;">Quando ativado, a p√°gina ser√° recarregada ap√≥s processar cada conversa, antes de passar para a pr√≥xima conversa com mensagens n√£o lidas. Isso ajuda a manter a extens√£o funcionando corretamente e evitar problemas de mem√≥ria.</p>
                                </div>
                                
                                <div class="form-actions">
                                    <button class="btn btn-primary" id="saveGeneralSettingsBtn">Salvar Configura√ß√µes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../js/config.js"></script>
    <script src="../../js/toast.js"></script>
    <script src="../../js/settings-geral.js"></script>
    <script>
        // Fun√ß√£o de logout
        function logout() {
            if (confirm('Deseja realmente sair?')) {
                sessionStorage.removeItem('imobflash_logged_in');
                sessionStorage.removeItem('imobflash_user_email');
                window.location.href = '../../index.html';
            }
        }
    </script>
</body>
</html>

